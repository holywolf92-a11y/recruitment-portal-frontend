# ğŸ—ï¸ Employee Task Log - System Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER INTERFACE (React Frontend)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  EmployeeDash    â”‚  â”‚   DailyLogForm   â”‚  â”‚   TeamLogs       â”‚ â”‚
â”‚  â”‚   board.tsx      â”‚  â”‚    (Modal)       â”‚  â”‚   .tsx           â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚ â€¢ Stats          â”‚  â”‚ â€¢ Candidate      â”‚  â”‚ â€¢ Filters        â”‚ â”‚
â”‚  â”‚ â€¢ Today's logs   â”‚  â”‚   selection      â”‚  â”‚ â€¢ Summary stats  â”‚ â”‚
â”‚  â”‚ â€¢ Quick add btn  â”‚  â”‚ â€¢ Task type      â”‚  â”‚ â€¢ Table view     â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚   selection      â”‚  â”‚ â€¢ CSV export     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Description    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚ â€¢ Time tracking  â”‚                        â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                         â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        CandidateActivityLog.tsx (In Profile Modal)         â”‚   â”‚
â”‚  â”‚  Shows all employee activity for a specific candidate      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ API Calls (JSON)
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway & Express Backend Server                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Routes: /api/employee-logs                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ POST   /logs              Create log                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /logs              List logs                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /logs/:id          Get log                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ PUT    /logs/:id          Update log (same-day)          â”‚ â”‚
â”‚  â”‚  â”œâ”€ DELETE /logs/:id          Delete log (admin)             â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /team/logs         Team logs (manager/admin)      â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /team/summary      Daily summary                  â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /candidate/:id     Candidate activity            â”‚ â”‚
â”‚  â”‚  â”œâ”€ GET    /task-types        List task types               â”‚ â”‚
â”‚  â”‚  â””â”€ POST   /task-types        Create task type (admin)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Controllers: employeeLogsController.ts                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ Request validation                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ Permission checks                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€ Business logic delegation                                â”‚ â”‚
â”‚  â”‚  â””â”€ Response formatting                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Services: employeeLogsService.ts                            â”‚ â”‚
â”‚  â”‚  â”œâ”€ createEmployeeLog()                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ getEmployeeLogs(filters)                                â”‚ â”‚
â”‚  â”‚  â”œâ”€ updateEmployeeLog(id, updates)                          â”‚ â”‚
â”‚  â”‚  â”œâ”€ getTeamLogs(filters)                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€ getEmployeeLogsForCandidate(candidateId)                â”‚ â”‚
â”‚  â”‚  â”œâ”€ getTaskTypes()                                          â”‚ â”‚
â”‚  â”‚  â””â”€ [More utility functions...]                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â†“                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Middleware                                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ authenticate - Verify JWT token                          â”‚ â”‚
â”‚  â”‚  â””â”€ [Other express middleware]                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ SQL Queries
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase PostgreSQL Database                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Tables:                                                            â”‚
â”‚  â”œâ”€ task_types (id, name, description, is_active, ...)            â”‚
â”‚  â”œâ”€ employee_logs (id, employee_id, candidate_id, task_type_id,  â”‚
â”‚  â”‚                 description, time_spent_minutes, log_date, ...)â”‚
â”‚  â”œâ”€ users (FK for employee_id, created_by, reviewed_by)          â”‚
â”‚  â””â”€ candidates (FK for candidate_id)                              â”‚
â”‚                                                                     â”‚
â”‚  Views:                                                             â”‚
â”‚  â”œâ”€ employee_daily_summary (aggregated stats per employee/day)   â”‚
â”‚  â””â”€ candidate_employee_activity (activity timeline)              â”‚
â”‚                                                                     â”‚
â”‚  Row-Level Security (RLS) Policies:                                â”‚
â”‚  â”œâ”€ task_types:                                                   â”‚
â”‚  â”‚  â”œâ”€ select_active - All authenticated can read active types  â”‚
â”‚  â”‚  â”œâ”€ insert_admin_only - Only admins can create              â”‚
â”‚  â”‚  â”œâ”€ update_admin_only - Only admins can update              â”‚
â”‚  â”‚  â””â”€ delete_admin_only - Only admins can delete              â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€ employee_logs:                                               â”‚
â”‚     â”œâ”€ insert - Employees can create their own logs            â”‚
â”‚     â”œâ”€ select_own - Employees see their own logs               â”‚
â”‚     â”œâ”€ select_manager_admin - Managers/admins see all          â”‚
â”‚     â”œâ”€ update_own - Employees update own logs (same-day only)  â”‚
â”‚     â”œâ”€ update_admin - Admins can update any log                â”‚
â”‚     â””â”€ delete_admin_only - Only admins can delete              â”‚
â”‚                                                                     â”‚
â”‚  Indexes (Performance):                                            â”‚
â”‚  â”œâ”€ idx_employee_logs_employee_id                                â”‚
â”‚  â”œâ”€ idx_employee_logs_candidate_id                               â”‚
â”‚  â”œâ”€ idx_employee_logs_task_type_id                               â”‚
â”‚  â”œâ”€ idx_employee_logs_log_date                                   â”‚
â”‚  â”œâ”€ idx_employee_logs_employee_date (composite)                 â”‚
â”‚  â””â”€ idx_employee_logs_candidate_date (composite)                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### 1. Employee Creating a Log

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Employee View  â”‚
â”‚   Dashboard     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Click "Add Daily Log"
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DailyLogForm Modal     â”‚
â”‚  - Candidate search    â”‚
â”‚  - Task type select    â”‚
â”‚  - Description field   â”‚
â”‚  - Time input          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Form submitted
         â†“
POST /api/employee-logs/logs
{
  "candidate_id": "...",
  "task_type_id": "...",
  "description": "...",
  "time_spent_minutes": 30
}
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsController                â”‚
â”‚  â”œâ”€ Validate fields                    â”‚
â”‚  â”œâ”€ Check authentication               â”‚
â”‚  â”œâ”€ Set employee_id from session       â”‚
â”‚  â””â”€ Call service layer                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsService                   â”‚
â”‚  â”œâ”€ createEmployeeLog()                â”‚
â”‚  â”œâ”€ Prepare data                       â”‚
â”‚  â”œâ”€ Insert into Supabase               â”‚
â”‚  â””â”€ Return created log                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase PostgreSQL (RLS enforced)    â”‚
â”‚  INSERT INTO employee_logs (...)       â”‚
â”‚  â”œâ”€ Verify user is authenticated       â”‚
â”‚  â”œâ”€ Verify user = employee_id          â”‚
â”‚  â”œâ”€ Insert row                         â”‚
â”‚  â””â”€ Return success                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response to Frontend                  â”‚
â”‚  {                                     â”‚
â”‚    "success": true,                    â”‚
â”‚    "data": { log object }              â”‚
â”‚  }                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EmployeeDashboard Updates  â”‚
â”‚  â”œâ”€ Refresh stats           â”‚
â”‚  â”œâ”€ Add to today's activity â”‚
â”‚  â”œâ”€ Show success message    â”‚
â”‚  â””â”€ Close modal             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Manager Viewing Team Logs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Manager clicks  â”‚
â”‚  "Team Logs" tab â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
GET /api/employee-logs/team/logs
?startDate=2026-02-01&endDate=2026-02-05&employeeId=...
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsController                     â”‚
â”‚  â”œâ”€ Check user role (manager/admin)         â”‚
â”‚  â”œâ”€ Validate filters                        â”‚
â”‚  â””â”€ Call service with filters               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsService                        â”‚
â”‚  â”œâ”€ getTeamLogs(filters)                    â”‚
â”‚  â”œâ”€ Build SQL query with filters            â”‚
â”‚  â”œâ”€ Execute with RLS policies               â”‚
â”‚  â””â”€ Return paginated results                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase PostgreSQL (RLS enforced)         â”‚
â”‚  SELECT * FROM employee_logs                â”‚
â”‚  WHERE log_date BETWEEN ? AND ?             â”‚
â”‚  AND (employee_id = ? OR user is admin)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response with logs + count                 â”‚
â”‚  {                                          â”‚
â”‚    "data": [ {...}, {...} ],               â”‚
â”‚    "count": 150                             â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TeamLogs Component      â”‚
â”‚  â”œâ”€ Display table        â”‚
â”‚  â”œâ”€ Show filters         â”‚
â”‚  â”œâ”€ Pagination controls  â”‚
â”‚  â””â”€ Export button        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Viewing Candidate Activity

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Open Candidate Profile  â”‚
â”‚  (CandidateDetailsModal) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Scroll to activity section
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CandidateActivityLog Component        â”‚
â”‚  â”œâ”€ Receive candidateId as prop        â”‚
â”‚  â””â”€ useEffect() triggers on mount      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
GET /api/employee-logs/candidate/{candidateId}/activity
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsController                â”‚
â”‚  â”œâ”€ Extract candidateId from path      â”‚
â”‚  â”œâ”€ Validate permissions               â”‚
â”‚  â””â”€ Call service                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  employeeLogsService                   â”‚
â”‚  â”œâ”€ getEmployeeLogsForCandidate()      â”‚
â”‚  â”œâ”€ Query by candidate_id              â”‚
â”‚  â””â”€ Join with employee + task_type     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase - SELECT from view           â”‚
â”‚  candidate_employee_activity           â”‚
â”‚  WHERE candidate_id = ?                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return activity timeline               â”‚
â”‚  [                                      â”‚
â”‚    {                                    â”‚
â”‚      "log_date": "2026-02-05",         â”‚
â”‚      "employee_name": "Jane Smith",    â”‚
â”‚      "task_type": "CV screening",      â”‚
â”‚      "description": "...",             â”‚
â”‚      "time_spent_minutes": 15          â”‚
â”‚    },                                   â”‚
â”‚    ...                                  â”‚
â”‚  ]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CandidateActivityLog renders          â”‚
â”‚  â”œâ”€ Timeline view                      â”‚
â”‚  â”œâ”€ Employee avatars                   â”‚
â”‚  â”œâ”€ Task type badges                   â”‚
â”‚  â””â”€ Description cards                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema

```
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚     users    â”‚
                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                     â”‚ id (PK)      â”‚
                     â”‚ name         â”‚
                     â”‚ role         â”‚
                     â”‚ email        â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†‘
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–²           â–²           â–²
                â”‚           â”‚           â”‚
        employee_id   created_by  reviewed_by
                â”‚           â”‚           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    employee_logs (Main Table)    â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)                         â”‚
    â”‚ employee_id (FK â†’users)         â”‚
    â”‚ candidate_id (FK â†’candidates)   â”‚
    â”‚ task_type_id (FK â†’task_types)   â”‚
    â”‚ description (TEXT)              â”‚
    â”‚ time_spent_minutes (INT)        â”‚
    â”‚ status (VARCHAR)                â”‚
    â”‚ log_date (DATE)                 â”‚
    â”‚ attachment_url (TEXT)           â”‚
    â”‚ is_flagged (BOOLEAN)            â”‚
    â”‚ flag_reason (TEXT)              â”‚
    â”‚ created_at (TIMESTAMP)          â”‚
    â”‚ updated_at (TIMESTAMP)          â”‚
    â”‚ created_by (FK â†’users)          â”‚
    â”‚ reviewed_by (FK â†’users)         â”‚
    â”‚ reviewed_at (TIMESTAMP)         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                           â†“
    candidate_id                task_type_id
        â†“                           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  candidates â”‚           â”‚  task_types  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)     â”‚           â”‚ id (PK)      â”‚
    â”‚ name        â”‚           â”‚ name (UNIQUE)â”‚
    â”‚ code        â”‚           â”‚ description  â”‚
    â”‚ email       â”‚           â”‚ is_active    â”‚
    â”‚ phone       â”‚           â”‚ created_at   â”‚
    â”‚ ...         â”‚           â”‚ updated_at   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Indexes:
â”œâ”€ employee_logs(employee_id)
â”œâ”€ employee_logs(candidate_id)
â”œâ”€ employee_logs(task_type_id)
â”œâ”€ employee_logs(log_date)
â”œâ”€ employee_logs(employee_id, log_date)  [composite]
â””â”€ employee_logs(candidate_id, log_date) [composite]

Views:
â”œâ”€ employee_daily_summary
â”‚  â””â”€ Groups logs by employee & date
â”‚     Calculates: count, candidates, time
â”‚
â””â”€ candidate_employee_activity
   â””â”€ Joins employee_logs with users & task_types
      Provides timeline view of activity
```

---

## Permission Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Role-Based Permissions          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         EMPLOYEE (Recruiter)            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â”‚ Create Logs:      YES (own logs only)   â”‚
â”‚ View Own Logs:    YES                   â”‚
â”‚ Edit Logs:        YES (same day only)   â”‚
â”‚ Delete Logs:      NO                    â”‚
â”‚ View Team Logs:   NO                    â”‚
â”‚ Create Task Type: NO                    â”‚
â”‚ Update Settings:  NO                    â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           MANAGER                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â”‚ Create Logs:      YES                   â”‚
â”‚ View Own Logs:    YES                   â”‚
â”‚ Edit Logs:        YES (same day only)   â”‚
â”‚ Delete Logs:      NO                    â”‚
â”‚ View Team Logs:   YES (team only)       â”‚
â”‚ Filter Logs:      YES                   â”‚
â”‚ Export Logs:      YES (CSV)             â”‚
â”‚ Create Task Type: NO                    â”‚
â”‚ Update Settings:  NO                    â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            ADMIN                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â”‚ Create Logs:      YES                   â”‚
â”‚ View Own Logs:    YES                   â”‚
â”‚ Edit Logs:        YES (any log)         â”‚
â”‚ Delete Logs:      YES                   â”‚
â”‚ View Team Logs:   YES (all)             â”‚
â”‚ Filter Logs:      YES                   â”‚
â”‚ Export Logs:      YES                   â”‚
â”‚ Flag Logs:        YES                   â”‚
â”‚ Create Task Type: YES                   â”‚
â”‚ Update Settings:  YES                   â”‚
â”‚ Manage Users:     YES                   â”‚
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RLS Implementation (Database Level):
â”œâ”€ All access controlled at database level
â”œâ”€ No permission bypass possible
â”œâ”€ Enforced even if API misconfigured
â””â”€ Audit-friendly (clear trail)
```

---

## Request/Response Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚   (React)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. User Action
       â”‚    (Click button, submit form)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Component State Update        â”‚
â”‚  (EmployeeDashboard, etc.)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. API Call
       â”‚    axios/fetch with auth header
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTP Request                  â”‚
â”‚  POST /api/employee-logs/logs â”‚
â”‚  Headers: Authorization: Bearer <token>
â”‚  Body: JSON data               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. Network
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Express REST API              â”‚
â”‚  Router â†’ handlers             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. Middleware
       â”‚  - authenticate
       â”‚  - parse JSON
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller                    â”‚
â”‚  - Validate input              â”‚
â”‚  - Check permissions           â”‚
â”‚  - Delegate to service         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 5. Business Logic
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Layer                 â”‚
â”‚  - Data transformation         â”‚
â”‚  - Query building              â”‚
â”‚  - Call Supabase client        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 6. Database Query
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Client               â”‚
â”‚  (Sends to PostgreSQL)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 7. RLS Enforcement
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL                    â”‚
â”‚  - Apply RLS policies          â”‚
â”‚  - Execute query               â”‚
â”‚  - Return result               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 8. Response (reversed)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service formats response      â”‚
â”‚  â””â”€> { success, data }         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller returns JSON       â”‚
â”‚  HTTP 200/201                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser receives response     â”‚
â”‚  â”œâ”€ Log data received          â”‚
â”‚  â””â”€ Network fetch fulfilled    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Component            â”‚
â”‚  â”œâ”€ Update state               â”‚
â”‚  â”œâ”€ Re-render UI               â”‚
â”‚  â””â”€ Show success message       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User sees result               â”‚
â”‚  (Log appears in dashboard)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Production Environment            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤

Internet
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CDN / Load Balancer    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Railway / Heroku / AWS  â”‚
â”‚  (Backend Node.js app)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ npm install              â”‚
â”‚ npm run build            â”‚
â”‚ npm start                â”‚
â”‚ PORT: 3000               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Makes queries to
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase (Cloud DB)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PostgreSQL (hosted)      â”‚
â”‚ Auth (via JWT)           â”‚
â”‚ Storage (optional)       â”‚
â”‚ Updates via migrations   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend (React):
â”œâ”€ Built to static files
â”œâ”€ Served from CDN
â”œâ”€ Vite build process
â””â”€ Imports API base URL from env

Environment Variables:
â”œâ”€ VITE_API_BASE_URL = https://api.domain.com
â”œâ”€ VITE_SUPABASE_URL
â”œâ”€ VITE_SUPABASE_ANON_KEY
â””â”€ etc.
```

---

## Key Components Interaction

```
App.tsx (Main)
  â”œâ”€ State: activeTab, user, session
  â”œâ”€ Routes to correct component
  â”œâ”€ Sidebar with navigation
  â””â”€ Navigation â†’ "Employees" â†’ EmployeesModule
                     â†“
EmployeesModule.tsx
  â”œâ”€ Tabs: "My Daily Log" / "Team Logs"
  â”œâ”€ Role-based rendering
  â”œâ”€ Delegates to appropriate view
  â”œâ”€ â†’ EmployeeDashboard (default)
  â””â”€ â†’ TeamLogs (manager/admin)
           â†“
Subcomponents:
â”œâ”€ EmployeeDashboard
â”‚  â”œâ”€ useEffect: fetch today's logs
â”‚  â”œâ”€ Renders: Stats grid, activity list
â”‚  â””â”€ Has: DailyLogForm button (modal)
â”‚
â”œâ”€ DailyLogForm (Modal)
â”‚  â”œâ”€ Opens as dialog
â”‚  â”œâ”€ Fetches task types & candidates
â”‚  â”œâ”€ Submits POST to /api/employee-logs/logs
â”‚  â”œâ”€ Callback: onSuccess() â†’ refresh parent
â”‚  â””â”€ Closes on submit
â”‚
â”œâ”€ TeamLogs (Manager/Admin only)
â”‚  â”œâ”€ useEffect: fetch team logs
â”‚  â”œâ”€ Renders: Filters, stats, table
â”‚  â”œâ”€ Pagination controls
â”‚  â”œâ”€ CSV export button
â”‚  â””â”€ GET /api/employee-logs/team/logs
â”‚
â””â”€ CandidateActivityLog (In candidate profile)
   â”œâ”€ Receives candidateId as prop
   â”œâ”€ Fetches activity on mount
   â”œâ”€ Renders: Timeline view
   â””â”€ GET /api/employee-logs/candidate/:id/activity
```

---

## State Management Flow

```
EmployeeDashboard
â”œâ”€ loading (boolean)
â”œâ”€ stats (TodayStats)
â”‚  â”œâ”€ logsCreated
â”‚  â”œâ”€ candidatesHandled
â”‚  â”œâ”€ totalTimeSpent
â”‚  â””â”€ pendingLogs
â”œâ”€ recentLogs (array)
â””â”€ refreshKey (trigger useEffect)

DailyLogForm
â”œâ”€ open (dialog open state)
â”œâ”€ loading (submit pending)
â”œâ”€ formData
â”‚  â”œâ”€ candidate_id
â”‚  â”œâ”€ task_type_id
â”‚  â”œâ”€ description
â”‚  â””â”€ time_spent_minutes
â”œâ”€ taskTypes (array)
â”œâ”€ candidates (array)
â”œâ”€ error (string | null)
â””â”€ success (boolean)

TeamLogs
â”œâ”€ loading (boolean)
â”œâ”€ logs (array)
â”œâ”€ employees (array)
â”œâ”€ totalCount (number)
â”œâ”€ filters {
â”‚  â”œâ”€ startDate
â”‚  â”œâ”€ endDate
â”‚  â”œâ”€ employeeId
â”‚  â””â”€ candidateName
â”œâ”€ page (number)
â””â”€ pageSize (constant 50)

CandidateActivityLog
â”œâ”€ loading (boolean)
â”œâ”€ logs (array)
â””â”€ error (string | null)
```

---

This architecture ensures:
âœ… **Scalability** - Database indexes, pagination, filtering
âœ… **Security** - RLS at database level, JWT auth
âœ… **Maintainability** - Separated concerns (controller/service)
âœ… **Performance** - Optimized queries, caching potential
âœ… **Auditability** - All actions logged with metadata
